PV 操作简介
-------------

# 简介:
> 本篇文章主要介绍计算机知识 PV 操作。

# 目录:
[1.PV 操作是什么](#1)

[2.PV 操作名词介绍](#2)

[3.PV 操作例子](#3)


# <span id = "1">**1.PV 操作是什么**</span>

### 介绍:

&ensp;&ensp;PV 操作，原来这是狄克斯特拉用荷兰文定义的，因为在荷兰文中，通过叫 `passeren`，释放叫 `vrijgeven`，PV操作 因此得名。这是在计算机术语中不是用英语表达的极少数的例子之一。

> 将每个进程分为“就绪”(ready)、“运行”(running)和“阻塞”(blocking)三个工作状态。 

![PV 操作状态图](https://img-blog.csdn.net/20150303114309620?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzA2Nzc1Ng==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)

- 运行

>由于在任一时刻最多只有一个进程可以使用处理机，正占用着处理机的进程称为“运行”进程。

- 就绪

>当某进程已具备了使用处理机的条件，而当前又没有处理机供其使用，则使该进程处于“就绪”状态。

- 阻塞

>当运行进程由于某种原因无法继续运行下去时，就停止其占用处理机，使之进入“阻塞”状态，待造成其退出运行的条件解除，再进入“就绪”状态。


# <span id = "2">**2.PV 操作名词介绍**</span>


### 信号量:

>一个结构体，包含一个整数value和一个PCB指针queue。其中value表示空闲资源数，queue指向PCB队列。只要有了queue指针，就可以维护这个队列。这个队列的意义是等待区。

### P 操作:

>一个指令序列。P = push，表示请求资源、入队。
>P 操作是对信号量的操作。指令序列是这样的：令 value 减少1。如果value<0，休眠（把进程排在队尾，并令进程进入等待状态）。


### V 操作:

>一个指令序列。V = victory，表示资源释放、出队。
V 操作是对信号量的操作。指令序列是这样的：令 value 增加1。如果value≤0，唤醒（将队列首的进程取出，并使其进入就绪状态）。




# <span id = "3">**3.PV 操作例子**</span>


### 公交车司机与售票员的问题：

![流程](https://img-blog.csdn.net/20171230120257505?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd3V4eTcyMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)


1. 首先，我们在司机进程使用P操作（S1=S1-1=-1），现在是S1的值为-1，我们来查看P操作发现应该 挂起本进程，也就是说司机进程暂时挂起，我们进入到售票员进程。
2. 进入售票员进程后，我们先 关车门，然后我们进行V操作（S1=S1+1=0），发现满足V操作的else，我们首先唤醒司机进程，然后我们继续执行售票员进程。
3. 接着售票，售票后我们执行P操作（S2=S2-1=-1），发现满足P操作的else，我们暂时将售票员进程挂起。
4. 进入到司机进程。
5. 启动车辆，正常行驶，到站停车，执行V操作（S2=S2+1=0），发现S2满足V操作的else，唤醒售票员进程，同时继续执行本进程。
6. 但是，我们可以发现司机进程已经执行完了，但是等待队列中还有售票员进程，我们就进入到售票员进程
7. 在售票员进程中，开车门，上下客。整个司机与售票员问题结束。

